<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<style>
     .content{
     	position: relative;
     }

     .item{
     	position: absolute;
     	margin-left: 10px;
     	margin-top: 10px;
     	width: 200px;
     	transition: all 1s;//css3属性，变化的时候会出现动画效果，过渡
     }

     .h1{
     	height: 100px;
     	background: #f98d44;
     }
     .h2{
     	height: 200px;
     	background: #66ccc2;
     }
     .h3{
     	height: 400px;
     	background: #8128ad;
     }
	</style>
</body>
<div class="content">
	<div class="item h1">
		1
	</div>
	<div class="item h2">
		2
	</div>
	<div class="item h3">
		3
	</div>
	<div class="item h1">
		4
	</div>
	<div class="item h3">
		5
	</div>
	<div class="item h2">
		6
	</div>
	<div class="item h1">
		7
	</div>
	<div class="item h3">
		8
	</div>
	<div class="item h3">
		9
	</div>
	<div class="item h2">
		10
	</div>
	<div class="item h3">
		11
	</div>
	<div class="item h3">
		12
	</div>
	<div class="item h2">
		13
	</div>
	<div class="item h3">
		14
	</div>
	<div class="item h1">
		15
	</div>
	<div class="item h3">
		16
	</div>
</div>
<script src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"></script>
<script>

 
var waterFall=(function(){

	function render(){
	var nodeWidth=$('.item').outerWidth(true),
	colNum=parseInt($(window).width()/nodeWidth),
	colSumHeight=[];
    console.log(colNum);

	for(var i=0;i<colNum;i++){
      colSumHeight.push(0);
	}

	$('.item').each(function(){
        $cur=$(this);
        // console.log($(this));
        var idx=0,
        minSumHeight=colSumHeight[0];

        for(var i=0;i<colSumHeight.length;i++){ 

           if(colSumHeight[i]<minSumHeight){
             minSumHeight = colSumHeight[i];
              idx = i;
           }
        }
        $cur.css({
        	left:nodeWidth*idx,
        	top:minSumHeight
        });
        colSumHeight[idx]=$cur.outerHeight(true)+colSumHeight[idx];
		
		});
	}
	render();
  $(window).on('resize',function(){
	 
	 	render();
	 	
	 });

return{
		init:render//把接口暴露出来
	}
})();

waterFall.init();


</script>
</html>