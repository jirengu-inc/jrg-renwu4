<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Examples</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
<script type="text/javascript" src="jquery.min.js"></script>
<style>
	.wrap{
		width: 900px;
		margin: 0 auto;
	}
	#header .wrap{
		background: red;
		height: 50px;
		line-height: 50px;
	}
	.ct{
		margin-top: 20px;
		overflow: auto
	}
	 .nav{
	    height: 30px;
	    border: 1px solid ;
	    background: yellow;
	  }
	.aside{
		float: left;
		width: 200px;
		height: 400px;
		background: pink;
	}
	.main{
		background: blue;
		height: 400px;
		overflow: auto;
	}

	#content .wrap{

	}
</style>
</head>
<body>


<div id="header">
  <div class="wrap">header</div>
</div>
<div id="content">
  <div class="wrap">

    <div class="ct">
      <div class="nav nav1">nav1</div>
      <div class="aside aside1">aside1</div>
      <div class="main">main1</div>
    </div>
    <div class="ct">
      <div class="nav nav2">nav2</div>
      <div class="aside aside2">aside2</div>
      <div class="main">main2</div>
    </div>
    <div class="ct">
      <div class="nav nav3">nav3</div>
      <div class="aside aside3">aside3</div>
      <div class="main">main3</div>
    </div>
    <div class="ct">
      <div class="nav nav4">nav4</div>
      <div class="aside">aside4</div>
      <div class="main">main4</div>
    </div>
  </div>
</div>
<div id="footer">footer</div>
<script>


  function stickup($el){
var $cur = $el;
var curH = $cur.height();
var curW = $cur.width();
var offsetTop = $cur.offset().top;
var offsetLeft = $cur.offset().left;
console.log($cur,curH,curW,offsetTop,offsetLeft)

var $clone = $cur.clone().css({display:'none',visibility:'hidden'})
              .insertBefore($cur)

$(window).on('scroll',function(){
  var scrollTop = $(this).scrollTop()
  console.log(scrollTop)
  if(scrollTop>=offsetTop){ 
    if(!isFixed()){
      setFixed()
    }
  }else{
    if(isFixed()){
      unsetFixed()
    }
  }
})

function isFixed(){
  return $cur.data('data-fixed') //初始值为false,
}
function setFixed(){
  $cur.data('data-fixed',true)
  $cur.css({
    position:'fixed',
    width:curW,
    height:curH,
    left:offsetLeft,
    // top:offsetTop,
    top:0,
    'z-index':999
  })
  $clone.show()
}
function unsetFixed(){
  $cur.data('data-fixed',false)
  $cur.removeAttr('style')
  $clone.hide()
}
  }
	stickup($('.nav1'))
	stickup($('.nav2'))
	stickup($('.nav3'))
	stickup($('.nav4'))
		

	
</script>
</body>
</html>
