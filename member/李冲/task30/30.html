<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>task30</title>
	<style>
	    .wrap{
	    	position:relative;
	    }
		.item{
			position: absolute;
			width:200px;
			margin-right: 10px;
			transition: all 1s;
			margin-bottom: 10px;
		}
        .h1{
        	height:300px;
        	background: blue;
        }
        .h2{
            height: 200px;
            background: pink;
        }     
        .h3{
        	height: 150px;
        	background: yellow;
        }
	</style>
</head>
<body>
	<div class="wrap">
		<div class="item h2">1</div>
		<div class="item h1">2</div>
		<div class="item h2">3</div>
		<div class="item h3">4</div>
		<div class="item h1">5</div>
		<div class="item h1">6</div>
		<div class="item h1">7</div>
		<div class="item h2">8</div>
		<div class="item h1">9</div>
		<div class="item h3">10</div>
		<div class="item h2">11</div>
		<div class="item h2">12</div>
		<div class="item h3">13</div>
		<div class="item h3">14</div>
		<div class="item h1">15</div>
	</div>
</body>
    <script src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>

    		function render(){
    			var nodeWidth = $('.item').outerWidth(true),
    			    cols = Math.floor(($(window).width())/nodeWidth),
    			    colSumHeight = [];
    			for(var i = 0; i < cols; i++){
    				colSumHeight[i] = 0;
    			}   
                $('.item').each(function(){
                    var $cur = $(this),
                        idx = 0,
                        minHeight = colSumHeight[0];
                    for(var i=0;i<colSumHeight.length;i++){
                    	if(minHeight>colSumHeight[i]){
                            minHeight = colSumHeight[i];
                            idx = i;
                    	}
                    }
                    $cur.css({
                    	left:nodeWidth*idx,
                    	top:minHeight
                    });
                    colSumHeight[idx] = colSumHeight[idx] + $cur.outerHeight(true);
                });
  
    		}
    	render();
    	$(window).on('resize',function(){
    		render();
    	});
    	

    </script>
</html>