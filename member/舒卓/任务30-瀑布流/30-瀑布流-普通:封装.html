<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>30</title>
    <script src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.js"> </script>
    <script type="text/javascript">
    $(function(){

      function getWater(){
        var nodeW = $('.items').outerWidth(true),    //得到包含边距的元素宽度
            colN = parseInt($(window).width()/nodeW), //得到页面宽度包含元素的整数个数
            sumHeight = [];            // 建立一个高度的数组，代表一个页面有几列

        for (var i = 0; i < colN; i++) {
          sumHeight.push(0) ;          //  刚开始几个元素的top为0,展示出前几列
        }

        $('.items').each(function(){    // 遍历整个元素
          var $cur = $(this);

          var idx = 0,
              minSumHeight = sumHeight[0];  // 设置一个元素等于第一个元素的高度
          for (var i = 0; i < sumHeight.length; i++) {  //遍历数组，所有元素和第一个比较
            if (sumHeight[i] < minSumHeight) {
              idx = i;
              minSumHeight = sumHeight[i];            // 得到最小，再赋值给minSumHeight
            }
          }


          $cur.css({
            left: nodeW*idx,                      // 设置的宽度等于 元素的宽度 * 所在位置
            top: minSumHeight                     // 用高度最小元素的高度 设置下一个要排列元素的高度
          });

          sumHeight[idx] = $cur.outerHeight(true) + sumHeight[idx];  //元素放好后，当前元素的总高度 = 当前元素的高度 加上 元素上方元素的高度
        })
    }

    getWater();

    $(window).on('resize',function(){
      getWater();
    })


      })
    </script>
    <style media="screen">
    #ct{
      position: relative;
    }
    .items{
      position: absolute;
      width: 200px;
      margin-bottom: 10px;
      margin-right: 10px;
      transition: all 1s;
    }
    .h1{
      height: 200px;
      background: #bacac6;
    }
    .h2{
      height: 350px;
      background: #88ada6;
    }
    .h3{
      height: 400px;
      background: #808080;
    }

    </style>
  </head>
  <body>
    <div id="ct">
      <div class="items h2">
        1
      </div>
      <div class="items h1">
        2
      </div>
      <div class="items h3">
        3
      </div>
      <div class="items h2">
        4
      </div>
      <div class="items h2">
        5
      </div>
      <div class="items h1">
        6
      </div>
      <div class="items h3">
        7
      </div>
      <div class="items h1">
        8
      </div>
      <div class="items h3">
        9
      </div>
      <div class="items h3">
        10
      </div>
      <div class="items h2">
        11
      </div>
      <div class="items h1">
        12
      </div>
      <div class="items h1">
        13
      </div>
      <div class="items h2">
        14
      </div>
      <div class="items h3">
        15
      </div>
      <div class="items h1">
        16
      </div>
    </div>


  </body>
</html>
