<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>29-1</title>
    <script src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.js"> </script>
    <style media="screen">
      .test{
        width: 300px;
        height: 450px;
        background: #eedeb0;
        margin: 0 auto;
        margin-bottom: 20px;
      }
      #gotop{
        position: fixed;
        bottom: 10px;
        right: 20px;
        width: 80px;
        height: 20px;
        border: 1px solid #41555d;
        text-align: center;
        background: #758a99;
        display: none;
      }
    </style>
  </head>
  <body>

    <div class="test"> 1</div>
    <div class="test"> 2</div>
    <div class="test"> 3</div>
    <div class="test"> 4</div>
    <div class="test"> 5</div>

    <script type="text/javascript">
    /*  var $goTop = $('<div id="gotop">回到顶部</div>');
      $('body').append($goTop);

      $(window).on('scroll',function(){
        var scrollTop = $('body').scrollTop();

        if(scrollTop > 300){
          $goTop.show();
        }else {
          $goTop.hide();
        }
      })

      $goTop.on('click',function(){
        $(window).scrollTop(0);
      });
      */


//   以下为上述代码的初级封装

      var Top = {
        init:function(){
          if($('#gotop').length > 0){    // 判断class存不存在元素内，存在就直接return
            return;
          }
          var $goTop = $('<div id="gotop">回到顶部</div>');
            $('body').append($goTop);

            this.$goTop = $goTop;        // 为了让bind函数能调用$goTop
            this.bind();
        },
        bind:function(){                // bind是绑定事件函数
          var is = this;                // 这里的this是指 var Top
          $(window).on('scroll',function(){
            var scrollTop = $('body').scrollTop();

            if(scrollTop > 300){
              is.$goTop.show();        //  如果没有is 是调用不到$goTop
            }else {
              is.$goTop.hide();
            }
          })

          is.$goTop.on('click',function(){
            $(window).scrollTop(0);
          });
        }
      }

      Top.init();

      
    </script>
  </body>
</html>
