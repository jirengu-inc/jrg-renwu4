<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>task30-1</title>
	<script src='http://apps.bdimg.com/libs/jquery/1.9.1/jquery.js'></script>
	<style>
		.container{
			position: relative;
		}
		.container .item{
			position: absolute;
			width: 200px;
		/*	margin-right: 10px;
			margin-top: 10px;*/
			margin: 10px;
			
			transition: all 1s;
		}
		.h1{
			height: 200px;
			background-color: red;
		}
		.h2{
			height: 300px;
			background-color: green;
		}
		.h3{
			height: 400px;
			background-color: blue;
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="item h1">1</div>
		<div class="item h2">2</div>
		<div class="item h1">3</div>
		<div class="item h3">4</div>
		<div class="item h2">5</div>
		<div class="item h1">6</div>
		<div class="item h3">7</div>
		<div class="item h2">8</div>
		<div class="item h2">9</div>
		<div class="item h1">10</div>
		<div class="item h2">11</div>
		<div class="item h1">12</div>
		<div class="item h2">13</div>
		<div class="item h3">14</div>
		<div class="item h3">15</div>
	</div>

	<script>

	var water = (function ($e) {
		// body...
		function render($e) {
			// body...
			render.$e = $e;
			var nodeWith = $e.outerWidth(true),
				colNum = parseInt($(window).width()/nodeWith),
				colH = [];
			for (var i = 0; i < colNum; i++) {
				colH.push(0);
			}

			$e.each(function () {
				// body...
				var $cur = $(this);

				var idx = 0,
					mincolH = colH[0];

				for (var i = 0; i < colH.length; i++) {
					if (colH[i]<mincolH) {
						idx = i;
						mincolH = colH[i];
					}
				}

				$cur.css({
					left:nodeWith*idx,
					top:mincolH
				})

				colH[idx] += $cur.outerHeight(true);
			});

		}
			//render();
			$(window).on('resize',function (argument) {
				// body...
				render(render.$e);
			})
			return {
				init:render	
			}
	})();
$(function() {
	// body...
	water.init($('.item'));
});		
		
	</script>
</body>
</html>