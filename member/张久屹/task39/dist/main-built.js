define("gotop",["jquery"],function(t){t(window).on("scroll",function(){t(window).scrollTop()>400?(t("#goTop").show(),t("#top").css({background:"#222"})):(t("#goTop").hide(),t("#top").css({background:"none"}))})}),define("carousle",["jquery"],function(t){function i(i){this.$dom=i,this.$list=i.find(".list"),this.$list.css({width:t(window).width()}),this.$listWidth=this.$list.outerWidth(!0),this.$ct=this.$dom.find(".wrap"),this.$next=this.$dom.find(".next"),this.$pre=this.$dom.find(".pre"),this.$bullet=this.$dom.find(".bullet"),this.$leng=this.$list.size(),this.$ct.append(this.$list.first().clone()),this.$ct.prepend(this.$list.last().clone()),this.$ct.css({left:0-this.$listWidth,width:this.$listWidth*this.$ct.find("li").size()}),this.curIdx=0,this.ready=!1,this.bind()}i.prototype={bind:function(){var i=this;t(window).on("resize",function(){i.changeWidth()}),i.$next.on("click",function(){i.toNext()}),i.$pre.on("click",function(){i.toPre()}),i.$bullet.find("li").on("click",function(){var n=t(this).index();n>i.curIdx?i.toNext(n-i.curIdx):n<i.curIdx&&i.toPre(i.curIdx-n)}),i.auto()},toNext:function(t){var i=this,t=t||1;console.log(i.$listWidth),i.ready||(i.ready=!0,i.$ct.animate({left:"-="+t*i.$listWidth},function(){i.curIdx=(i.curIdx+t)%i.$leng,0===i.curIdx&&i.$ct.css({left:0-i.$listWidth}),i.ready=!1,i.setBullet()}))},toPre:function(i){var n=this,i=i||1;n.ready||(n.ready=!0,n.$ct.animate({left:"+="+i*t(window).width()},function(){n.curIdx=(n.curIdx-i)%n.$leng,-1===n.curIdx&&(n.curIdx=3,n.$ct.css({left:0-n.$listWidth*n.$leng})),n.ready=!1,n.setBullet()}))},setBullet:function(){var t=this;t.$bullet.find("li").eq(t.curIdx).addClass("nav").siblings().removeClass("nav")},changeWidth:function(){var i=this;i.$listWidth=t(window).width(),i.$ct.find("li").css({width:t(window).width()}),i.$ct.css({left:0-i.$listWidth,width:i.$listWidth*i.$ct.find("li").size()})},auto:function(){var t=this;setInterval(function(){t.toNext()},3e3)}};new i(t("#banner"))}),define("waterfall",["jquery"],function(t){function i(){t.ajax({url:"http://platform.sina.com.cn/slide/album_tech?",type:"get",dataType:"jsonp",jsonp:"jsoncallback",data:{app_key:"1271687855",format:"json",size:"img",num:o,page:e},success:function(i){if("0"===i.status.code){var o=n(i.data);s(o),e++,l=!0,t("#load").text("加载更多")}else console.log("错了~")}})}function n(i){for(var n,s="",e=0;e<i.length;e++)s+='<li class="list">',s+='<a href="'+i[e].url+'" class="link"><img src="'+i[e].img_url+'"alt=""></a>',s+='<h4 class="header">'+i[e].short_name+"</h4><hr>",s+='<p class="desp">'+i[e].short_intro+"</p>",s+="</li>";return n=t(s),t("#main .wrap").append(n),n}function s(i){var n=i.outerWidth(!0),s=parseInt(t("#main .wrap").width()/n);if(0==d.length){for(var e=0;s>e;e++)d.push(0);d.length=d.length}i.each(function(){var i=t(this);t(this).find("img").on("load",function(){for(var s=0,e=d[0],o=0;o<d.length;o++)d[o]<e&&(s=o,e=d[o]);i.css({top:e,left:s*n}),d[s]+=i.outerHeight(!0),t("#pic-ct").height(Math.max.apply(null,d))})})}var e=1,o=6,l=(t("#load"),!0);t("#load").on("click",function(){l&&(l=!1,t("#load").text("loading..."),i())}),i();var d=[]}),define("layload",["jquery"],function(){function t(t){this.$dom=t,this.$li=this.$dom.find("li"),this.$wrap=this.$dom.find(".wrap"),this.$kong=this.$dom.find(".kong");var i=this;i.$li.each(function(){var t=$(this);$(window).on("scroll",function(){$(window).scrollTop()+$(window).height()>t.offset().top&&t.fadeTo(2e3,1,function(){i.$kong.fadeTo(4e3,1)})})})}new t($("#about"))}),requirejs.config({baseUrl:"js",paths:{jquery:"http://apps.bdimg.com/libs/jquery/1.9.1/jquery"}}),requirejs(["gotop"]),requirejs(["carousle"]),requirejs(["waterfall"]),requirejs(["layload"]),define("main",function(){});