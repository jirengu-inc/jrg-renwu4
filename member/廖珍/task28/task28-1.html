<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>task28-1</title>
		<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.js"></script>
		<style>
			html,body{
				padding:0;
				margin:0;
			}
			#header {
				background:red;
				height:80px;
				line-height:80px;
				text-align:center;
			}
			.nav {
				height:40px;
				margin-top:20px;
				background:blue;
			}
			.content {
				min-height:800px;
				background:#ccc;
				padding:10px;
				overflow:auto;
			}
			.content .aside {
				float:left;
				width:100px;
				min-height:400px;
				background:green;
			}
			.content .main {
				overflow:auto;
				background:#fff;
				padding-left:20px;
				min-height:800px;
			}
			.
		</style>
	</head>
	<body>
		<div id="header">header</div>
		<div class="nav">nav</div>
		<div class="content">
			<div class="aside">aside</div>
			<div class="main">main</div>
		</div>
		<div class="footer"></div>
	</body>
	<script>
		var $cur=$(".nav");
		var $curW=$cur.width();
		var $curH=$cur.height();
		var offsetLeft=$cur.offset().left;
		var offsetTop=$cur.offset().top;


		var $curClone=$cur.clone().css({display:'none',visibility:"hidden"}).insertBefore($cur);

		$(window).on("scroll",function() {
			var scrollTop=$(this).scrollTop();
			if(scrollTop>=offsetTop) {
				if(!isFixed()) {
					setFixed();
				}
			}else {
				if(isFixed()) {
					unsetFixed()
				}
			}
		});
		function isFixed() {
			return $cur.data("data-fixed");
		}

		function setFixed() {
			$cur.data("data-fixed",true)
				.css({
					"position":"fixed",
					"top":0,
					"left":offsetLeft,
					"width":$curW,
					"margin":0
				});
				$curClone.show();
		}
		function unsetFixed() {
			$cur.data("data-fixed",false)
				.removeAttr("style");
				$curClone.hide();
		}
		
			</script>
</html>